<!doctype html>
<html lang="it">
<head><meta charset="utf-8" /><title>Iscrizione</title></head>
<body>
<h1>Abbonati al canale</h1>
<form id="f">
<input name="phone" placeholder="Telefono" required><br>
<input name="discord_nick" placeholder="Discord"><br>
<input name="telegram_nick" placeholder="Telegram"><br>
<input name="bitget_uid" placeholder="Bitget UID"><br>
<input name="email" type="email" placeholder="Email" required><br>
<select name="plan"><option value="MONTHLY">Mensile</option><option value="YEARLY">Annuale</option></select>
<button>Invia</button>
</form>
<pre id="out"></pre>
<script>
const f=document.getElementById('f');const out=document.getElementById('out');
f.addEventListener('submit',async e=>{e.preventDefault();
const data=Object.fromEntries(new FormData(f).entries());
const res=await fetch('/api/subscribe',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
const j=await res.json();
out.textContent=res.ok?'Iscrizione salvata: '+j.id:'Errore: '+(j.error||'');
});
</script>
</body>
</html>